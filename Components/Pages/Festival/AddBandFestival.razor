@page "/addbandfestival"
@rendermode InteractiveServer

@using ShowTime.Models
@using ShowTime.Repositories.Interfaces

@inject IRepositoryBand repoband
@inject IRepositoryFestivals repofesttivals

<MudTable Items="@Festivals" Hover="true" Breakpoint="Breakpoint.Sm">
    <HeaderContent>
        <MudTh>Name</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Nr">@context.Name</MudTd>
        <MudButton Color="Color.Success" @onclick="()=>pickedfestival = context.ID">Pick Me</MudButton>
        </RowTemplate>
</MudTable>
@if (pickedfestival != null)
{
    <MudTable Items="@Bands" Hover="true" Breakpoint="Breakpoint.Sm">
        <HeaderContent>
            <MudTh>Name</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Nr">@context.Name</MudTd>
            <MudButton Color="Color.Success" @onclick="()=>pickedfestival=null">Add to Festival</MudButton>
        </RowTemplate>
    </MudTable>
    
}
@code {
    private Guid? pickedfestival;
    private IEnumerable<Festival> Festivals = new List<Festival>();
    private IEnumerable<Band> Bands = new List<Band>();
    
    
    protected override async Task OnInitializedAsync()
    {
        Festivals = await repofesttivals.GetAllAsync();
        Bands = await repoband.GetAllAsync();
    }

    
}